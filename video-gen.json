{
  "name": "MSI Video Generator",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "msi-video-gen",
        "responseMode": "responseNode",
        "options": {
          "allowedOrigins": "*",
          "rawBody": false
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        400,
        400
      ],
      "id": "e403b818-9dad-4efd-94f8-1eb27485f6f3",
      "name": "Webhook - Video Gen",
      "webhookId": "msi-video-gen"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.item.json;\nlet data = input.body || input;\nif (typeof data === 'string') {\n  try { data = JSON.parse(data); } catch (e) { }\n}\n\nconst prompt = data.prompt || data.video_prompt || '';\nconst start_image_url = data.start_image_url || data.imageUrl || null;\nconst second_image_url = data.second_image_url || data.end_image_url || null;\nconst aspect_ratio = data.aspect_ratio || data.aspectRatio || '9:16';\nconst service = data.service || 'company_intro';\nconst post_id = data.post_id || data.postId || null;\nconst topic = data.topic || '';\nconst duration = Math.min(parseInt(data.duration || '8'), 8);\n\nif (!prompt || prompt.length < 3) throw new Error('prompt is required');\nif (!start_image_url) throw new Error('start_image_url is required');\nif (!second_image_url || second_image_url.length < 5) throw new Error('second_image_url is required');\n\nreturn [{ json: { prompt, duration: String(duration), aspect_ratio, service, post_id, topic, start_image_url, second_image_url } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        620,
        400
      ],
      "id": "14619088-ccd9-406b-9376-1133b57cd1be",
      "name": "Format Video Input"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\"You are creating a 2-PART promotional video script for MSI Technologies.\\n\\nEach part is \" + $json.duration + \"s long. The video starts from provided reference images.\\n\\nMSI SERVICE FOCUS: \" + $json.service + \"\\nSCENE DESCRIPTION: \" + $json.prompt + \"\\nTARGET AUDIENCE: \" + ($json.topic || 'Business professionals') + \"\\n\\nSERVICE DETAILS:\\ncompany_intro: MSI Technologies is a global IT consulting company providing cybersecurity, AI solutions, BPO, IT outsourcing, executive consulting, and telecom services.\\nit_cybersecurity: MSI IT Management and Cybersecurity - Advanced security to protect your business and ensure data integrity.\\nai_solutions: MSI AI and Smart Business Solutions - Empowering companies to automate routine tasks and drive innovation.\\nbpo: MSI Business Process Outsourcing - Handling non-core tasks so you can focus on what really matters.\\nit_outsourcing: MSI IT Outsourcing Solutions - Access to a global pool of talented professionals without hiring in-house.\\nexecutive_consulting: MSI Executive Consulting - Helping organizations navigate complexity, drive performance, and stay ahead.\\ntelecom: MSI Telecom Services - Network planning, optimization, indoor and outdoor RF measurements, engineering and consulting.\\n\\nVIDEO REQUIREMENTS:\\n- The person MUST SPEAK DIRECTLY TO CAMERA about the MSI service\\n- Present how MSI helps businesses with this specific service\\n- Subtle, natural gestures only - minimal movement to preserve scene stability\\n- Clear lip movement and audible voice throughout\\n- Professional corporate setting matching the reference images\\n- All dialogue MUST be delivered completely within \" + $json.duration + \" seconds per part\\n- THE ONLY AUDIO IS THE VOICE SPEAKING - absolutely ZERO music, ZERO soundtrack, ZERO ambient sounds, ZERO background noise of any kind\\n- NO visual transitions - single continuous take, no fades, dissolves, or wipes\\n- Cinematic lighting, completely LOCKED static camera - zero camera movement of any kind\\n- NO text, letters, or words visible on screen\\n- The MSI Technologies logo is visible in top-left corner of all reference images - preserve it\\n- The MSI Technologies lo